<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是进程与线程 | 小明同学的学习笔记</title>
    <meta name="description" content="记录成长的点点滴滴">
    
    
    <link rel="preload" href="/assets/css/0.styles.a0ada997.css" as="style"><link rel="preload" href="/assets/js/app.6012d9b2.js" as="script"><link rel="preload" href="/assets/js/2.bb8ccb54.js" as="script"><link rel="preload" href="/assets/js/6.62a089cc.js" as="script"><link rel="prefetch" href="/assets/js/10.e00ddb95.js"><link rel="prefetch" href="/assets/js/11.9f6a92d3.js"><link rel="prefetch" href="/assets/js/12.18197ce7.js"><link rel="prefetch" href="/assets/js/3.3faa0082.js"><link rel="prefetch" href="/assets/js/4.e2e0255b.js"><link rel="prefetch" href="/assets/js/5.653dd45a.js"><link rel="prefetch" href="/assets/js/7.511c2174.js"><link rel="prefetch" href="/assets/js/8.60518edc.js"><link rel="prefetch" href="/assets/js/9.8b0a8383.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0ada997.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小明同学的学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/browers/chapter1/" class="nav-link">开始</a></div><div class="nav-item"><a href="https://github.com/wen-haoming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/browers/chapter1/" class="nav-link">开始</a></div><div class="nav-item"><a href="https://github.com/wen-haoming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github地址
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>返回首页</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" class="sidebar-link">Home</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS基础知识巩固</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter1/this.html" class="sidebar-link">this</a></li><li><a href="/chapter1/type.html" class="sidebar-link">类型转换</a></li><li><a href="/chapter1/bibao.html" class="sidebar-link">闭包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>高阶函数及es6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/promise/1.html" class="sidebar-link">高阶函数</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器知识笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/browers/progress.html" class="active sidebar-link">什么是进程与线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/browers/progress.html#什么是进程与线程" class="sidebar-link">什么是进程与线程</a></li><li class="sidebar-sub-header"><a href="/browers/progress.html#什么是并行处理？" class="sidebar-link">什么是并行处理？</a></li><li class="sidebar-sub-header"><a href="/browers/progress.html#线程vs进程" class="sidebar-link">线程vs进程</a></li><li class="sidebar-sub-header"><a href="/browers/progress.html#问题" class="sidebar-link">问题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="什么是进程与线程"><a href="#什么是进程与线程" aria-hidden="true" class="header-anchor">#</a> 什么是进程与线程</h2> <blockquote><p>chrome一启动 为什么就启动了4个进程？</p> <ol><li><p>什么是并行处理</p></li> <li><p>进程和线程是什么？</p></li> <li><p>进程和线程的关系？</p></li></ol></blockquote> <h2 id="什么是并行处理？"><a href="#什么是并行处理？" aria-hidden="true" class="header-anchor">#</a> 什么是并行处理？</h2> <p>首先一段代码的执行可以分为<strong>单线程</strong>和<strong>多线程</strong>，</p> <ol><li>如果使用单线程处理的话就是每一行都按顺序执行。</li> <li>多线程处理会把任务切分，同时使用多个线程来同时执行该任务。</li></ol> <p>因此使用并行处理能大幅提升性能</p> <h2 id="线程vs进程"><a href="#线程vs进程" aria-hidden="true" class="header-anchor">#</a> 线程vs进程</h2> <p><strong>多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的</strong></p> <h3 id="什么是进程？"><a href="#什么是进程？" aria-hidden="true" class="header-anchor">#</a> 什么是进程？</h3> <blockquote><p>一个浏览器其实就是一个小型的操作系统</p></blockquote> <p><strong>一个进程就是一个程序运行的实例</strong>，详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个<strong>运行的环境</strong>叫<strong>进程</strong>。</p> <p>当一个进程关闭的时候，操作系统会回收进程所占用的内存。线程是依附于进程的，而进程中使用多线程并行处理能提升运算效率。</p> <p>进程和线程的4个特点：</p> <ol><li>进程中任意一线程出错，都会导致整个进程的奔溃。</li> <li>线程之间共享进程中的数据。</li> <li>当一个进程关闭之后，操作系统会回收进程所占用的内存。</li> <li>进程之间的内容相互隔离。</li></ol> <h3 id="单进程浏览器时代"><a href="#单进程浏览器时代" aria-hidden="true" class="header-anchor">#</a> 单进程浏览器时代</h3> <blockquote><p>但进程浏览器是指浏览器的所有功能模块都是运行在同一进程里。</p></blockquote> <p>导致的问题：</p> <ol><li>不稳定</li> <li>不流畅</li> <li>不安全</li></ol> <h3 id="早期多进程架构"><a href="#早期多进程架构" aria-hidden="true" class="header-anchor">#</a> 早期多进程架构</h3> <p>解释了本文开头的为什么浏览器打开就有4个进程</p> <p><img src="https://static001.geekbang.org/resource/image/cd/60/cdc9215e6c6377fc965b7fac8c3ec960.png" alt="cdc9215e6c6377fc965b7fac8c3ec960"></p> <p>多进程架构解决的问题：</p> <ol><li>进程的隔离，导致每一个都是独立的奔溃而不会影响别的</li> <li>js运行在渲染进程，就算阻塞了渲染进程也只是影响当前的</li> <li>安全问题是存放在安全沙箱</li></ol> <h3 id="目前多进程机构"><a href="#目前多进程机构" aria-hidden="true" class="header-anchor">#</a> 目前多进程机构</h3> <p><img src="https://static001.geekbang.org/resource/image/b6/fc/b61cab529fa31301bde290813b4587fc.png" alt="b61cab529fa31301bde290813b4587fc"></p> <p>虽然多进程模型提升了浏览器的稳定性，流畅性和安全性，但同样不避免带来一些问题。</p> <ul><li>更高的资源占用</li> <li>更复杂的体系架构</li></ul> <h2 id="问题"><a href="#问题" aria-hidden="true" class="header-anchor">#</a> 问题</h2> <p>1.即使是如今的多进程架构，我偶尔还会碰到一些由于单个页面卡死最终崩溃导致所有页面崩溃的情况，请问这是什么原因呢</p> <div class="language- extra-class"><pre class="language-text"><code>是这样的，通常情况下是一个页面使用一个进程，但是，有一种情况，叫&quot;同一站点(same-site)&quot;，具体地讲，我们将“同一站点”定义为根域名（例如，geekbang.org）加上协议（例如，https:// 或者http://），还包含了该根域名下的所有子域名和不同的端口，比如下面这三个：

https://time.geekbang.org
https://www.geekbang.org
https://www.geekbang.org:8080
都是属于同一站点，因为它们的协议都是https，而根域名也都是geekbang.org。你也许了解同源策略，但是同一站点和同源策略还是存在一些不同地方，在这里你需要了解它们不是同一件事就行了。

Chrome的默认策略是，每个标签对应一个渲染进程。但是如果从一个页面打开了新页面，而新页面和当前页面属于同一站点时，那么新页面会复用父页面的渲染进程。官方把这个默认策略叫process-per-site-instance。直白的讲，就是如果几个页面符合同一站点，那么他们将被分配到一个渲染进程里面去。

所以，这种情况下，一个页面崩溃了，会导致同一站点的页面同时崩溃，因为他们使用了同一个渲染进程。

为什么要让他们跑在一个进程里面呢？

因为在一个渲染进程里面，他们就会共享JS的执行环境，也就是说A页面可以直接在B页面中执行脚本。因为是同一家的站点，所以是有这个需求的。
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/promise/1.html" class="prev">
          高阶函数
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6012d9b2.js" defer></script><script src="/assets/js/2.bb8ccb54.js" defer></script><script src="/assets/js/6.62a089cc.js" defer></script>
  </body>
</html>
