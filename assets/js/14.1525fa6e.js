(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{274:function(t,s,n){"use strict";n.r(s);var a=n(38),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"node实现模块化原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node实现模块化原理","aria-hidden":"true"}},[t._v("#")]),t._v(" node实现模块化原理")]),t._v(" "),n("pre",[n("code",[t._v("1. 命名空间，防止命名冲突 -- 无法彻底解决命名问题\n2. 自执行函数 node 让js 拥有了服务端执行的能力，可以读写文件\n")])]),t._v(" "),n("p",[t._v("node能实现commonJs规范依赖于"),n("strong",[t._v("文件的读写")])]),t._v(" "),n("p",[t._v("fs.readFileSync --读文件")]),t._v(" "),n("p",[t._v("fs.accessSync -- 查看文件是否存在")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// path模块")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve 出来的一定是一个绝对路径")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// join 就是以/拼接")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果有 / 只能用join")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/c'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取扩展名")]),t._v("\n\tpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("extname")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'main.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 直接取名")]),t._v("\n\tpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'main.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取父路径")]),t._v("\n\tpath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"_2-1-路径分析和文件定位"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-路径分析和文件定位","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1 路径分析和文件定位")]),t._v(" "),n("p",[t._v("路径分析-模块标识")]),t._v(" "),n("ul",[n("li",[t._v("核心模块 如http，fs，path等  "),n("strong",[t._v("速度最快")])]),t._v(" "),n("li",[t._v(". 或 . . 的相对路径文件模块 "),n("strong",[t._v("速度第二")])]),t._v(" "),n("li",[t._v("/ 开头的绝对路径文件模块 "),n("strong",[t._v("速度第二")])]),t._v(" "),n("li",[t._v("非路径的自定义connect模块 "),n("strong",[t._v("速度最慢")]),t._v(" 在当前文件延上层查找查找到node_Modules里面")])]),t._v(" "),n("p",[t._v("文件定位")]),t._v(" "),n("p",[t._v("​\tnodeJs分析标识符的过程，会按照.js .json .node的次序补足扩展名依次尝试")]),t._v(" "),n("p",[t._v("诀窍：")]),t._v(" "),n("pre",[n("code",[t._v("1. 如果是.node 和.json 文件 在传递给require的标识符带上扩展名能加快一点速度。\n2. 同步配合缓存，可以大幅度缓解node单线程中阻塞式调用的缺陷。 \n")])]),t._v(" "),n("p",[t._v("如果require分析文件扩展名得到一个目录，则会去package.json文件的main.js属性去查找对应的文件")])])},[],!1,null,null,null);s.default=e.exports}}]);